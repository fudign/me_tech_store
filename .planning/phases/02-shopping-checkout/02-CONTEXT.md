# Phase 2: Shopping & Checkout - Context

**Gathered:** 2026-01-23
**Status:** Ready for planning

<domain>
## Phase Boundary

Customers can add products to cart, checkout as guest without registration, choose payment method (cash on delivery, online payment, installment), and complete order. Administrator receives notifications about new orders and can manage order statuses through admin panel.

This phase delivers the complete shopping experience from "Add to Cart" to order confirmation. Payment gateway integration and Telegram notifications are deferred to future phases.

</domain>

<decisions>
## Implementation Decisions

### Корзина UI и поведение

- **Страница корзины:** Отдельная страница `/cart` (полностраничный вид, не drawer/sidebar)
- **Добавление в корзину:** При нажатии "Добавить в корзину" — остаться на текущей странице, показать уведомление (toast/alert), обновить счетчик в хедере
- **Обновление количества:** Изменение количества товара на странице `/cart` работает без перезагрузки страницы (AJAX)
- **Индикатор в хедере:** На иконке корзины показывать количество товаров (бейдж с цифрой), не сумму

### Checkout процесс

- **Формат:** Одностраничный checkout — все поля на одной странице (не многошаговый)
- **Обязательные поля:**
  - Имя (полное имя или имя+фамилия)
  - Телефон
  - Адрес доставки (улица, дом, квартира, город)
- **Опциональные поля:** Email не собирается в этой фазе
- **Валидация:** Строгая валидация
  - Формат телефона: +996 (Кыргызстан)
  - Минимальная длина имени
  - Обязательные поля должны быть заполнены

### Способы оплаты

- **Доступные методы:**
  - Наличными при получении (cash on delivery)
  - Онлайн оплата картой (заглушка — интеграция в будущей фазе)
  - Рассрочка (заглушка — клиент выбирает опцию, менеджер связывается для оформления)
- **UI выбора оплаты:** Простой dropdown/select (не визуальные карточки с иконками)
- **Интеграция с платежными системами:** Отложена на потом — в этой фазе только выбор опции

### Уведомления и статусы заказов

- **Уведомления администратору:**
  - Заказ появляется в списке в админ-панели
  - Telegram уведомления отложены на потом (в этой фазе не реализуются)
  - Email уведомления не требуются
- **Статусы заказов:** Стандартные 4 статуса из ROADMAP.md
  - Новый (New)
  - В обработке (Processing)
  - Доставляется (Delivering)
  - Выполнен (Completed)
- **Управление заказами:** В админ-панели `/admin` — список заказов + страница просмотра заказа с возможностью изменить статус

### Claude's Discretion

- Дизайн уведомления при добавлении в корзину (toast/alert стиль)
- Структура таблицы заказов в базе данных
- Точный формат отображения информации о заказе в админке
- Обработка ошибок при валидации формы
- Пустые состояния (empty states) для корзины и списка заказов

</decisions>

<specifics>
## Specific Ideas

- Корзина должна работать как в классических интернет-магазинах — отдельная страница с возможностью изменить количество
- AJAX обновления для улучшения UX — без перезагрузки страницы при изменении количества
- Минималистичный checkout — только самые необходимые поля (имя, телефон, адрес)
- Валидация телефона для Кыргызстана (+996) — важно для местного рынка

</specifics>

<deferred>
## Deferred Ideas

- **Интеграция с платежными системами** — реальная онлайн оплата картой (будущая фаза)
- **Telegram уведомления** — отправка уведомлений администратору через Telegram бота (будущая фаза)
- **Email уведомления** — отправка подтверждений заказа клиенту на email (будущая фаза)
- **Интеграция с банками для рассрочки** — API интеграция с банками-партнерами (будущая фаза)
- **Дополнительные статусы заказов** — Отменен, Возврат, Ожидает оплаты (пока не требуются)

</deferred>

---

*Phase: 02-shopping-checkout*
*Context gathered: 2026-01-23*
