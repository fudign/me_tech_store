# Phase 4: Polish & Launch - Context

**Gathered:** 2026-01-23
**Status:** Ready for planning

<domain>
## Phase Boundary

Подготовка сайта к продакшен-запуску: SEO оптимизация для поисковых систем, оптимизация изображений для быстрой загрузки, кэширование для производительности, и настройка развертывания на продакшен-сервере. Новые функции (например, отзывы, рекомендации) относятся к будущим фазам.

</domain>

<decisions>
## Implementation Decisions

### SEO - Meta-теги и URL
- Meta-теги (title, description) генерируются автоматически по шаблону с возможностью ручного переопределения в админке
- URL slug генерируется автоматически из названия товара при создании, с возможностью редактирования
- Sitemap.xml и robots.txt генерируются динамически и кэшируются на 24 часа, обновляются при изменении товаров
- Breadcrumbs (хлебные крошки) на всех страницах для навигации и SEO

### SEO - Open Graph и разметка
- Open Graph теги (og:image, og:title, og:description) генерируются автоматически для красивых превью в соцсетях
- Schema.org разметка для товаров (Product schema) - название, цена, изображение, availability
- Canonical URLs для предотвращения дублирования контента

### Оптимизация изображений - Обработка
- Оптимизация происходит on-the-fly при первом запросе (оригинал сохраняется, версии генерируются по требованию и кэшируются)
- Форматы: WebP для современных браузеров с fallback на JPEG для совместимости (<picture> тег)
- 3 размера миниатюр: малая (~200x200px для каталога), средняя (~600x600px для карточки товара), большая (~1200x1200px для зума)
- Native lazy loading (loading="lazy" атрибут) без JS библиотек

### Производительность - Кэширование
- Кэшировать: списки товаров, карточки товаров, настройки сайта, результаты поиска
- Стратегия: кэш сбрасывается при изменении контента в админке + дополнительный TTL 6 часов для безопасности
- Категории и меню навигации кэшируются до изменения
- Redis рекомендуется для production (fallback на file cache)

### Производительность - База данных
- Добавить недостающие индексы: slug (products, categories), price, category_id, created_at
- Пагинация: 20 товаров на странице (текущее значение)
- Eager loading уже реализован в контроллерах (N+1 query prevention)

### Развертывание - Окружение
- Хостинг: универсальная инструкция (подходит для VPS и shared hosting)
- SSL: Let's Encrypt с автопродлением (инструкция для nginx/Apache)
- Критичные .env настройки:
  - APP_ENV=production
  - APP_DEBUG=false
  - DB_* креденшлы
  - CACHE_DRIVER (redis/file)
  - SESSION_DRIVER (redis/file)
  - APP_URL с правильным доменом

### Развертывание - База данных
- php artisan migrate --force для развертывания схемы
- php artisan db:seed для наполнения тестовыми данными Xiaomi товаров
- Создать admin пользователя через seeder
- Проверить права доступа к storage/ и bootstrap/cache/

### Claude's Discretion
- Точные шаблоны meta-тегов (формат title/description)
- Качество сжатия WebP (баланс размер/качество)
- Размеры thumbnail (точные пиксели, сохранение пропорций)
- Конкретные индексы БД (составные индексы если нужно)
- Deployment checklist и порядок команд
- Настройка веб-сервера (nginx/Apache конфигурация)
- Asset compilation и versioning (mix/vite)

</decisions>

<specifics>
## Specific Ideas

- Meta title шаблон: "Купить {название} - цена {цена} сом в Бишкеке | Xiaomi Store"
- Meta description: название + ключевые характеристики + "✓ Официальная гарантия ✓ Доставка по Кыргызстану"
- Sitemap приоритеты: главная (1.0), категории (0.8), товары (0.6)
- Robots.txt: разрешить всё кроме /admin, /api, /cart
- WebP качество ~80% для баланса размер/качество
- Thumbnail sizes: 200x200, 600x600, 1200x1200 (квадратные для единообразия)
- Redis для cache/session если возможно, иначе file driver

</specifics>

<deferred>
## Deferred Ideas

Нет - обсуждение осталось в рамках фазы оптимизации и запуска.

</deferred>

---

*Phase: 04-polish-launch*
*Context gathered: 2026-01-23*
